# Мок-данные для тестирования

## Описание

Проект включает скрипт для генерации тестовых данных, который заполняет базу данных реалистичными данными для тестирования всех функций системы.

## Что создаётся

### Магазины (4 шт.)
- Детский мир - Центр
- Детский мир - Периферия  
- Детский мир - ТЦ Авиапарк
- Детский мир - МЕГА

### Клиенты (10 шт.)
Создаются клиенты с разными именами, телефонами и email адресами.

### Правила скидок (5 шт.)
1. **Скидка для новых клиентов** - 10% для первых покупок от 500₽
2. **Скидка для постоянных клиентов** - 5% при покупке от 2000₽ (требуется 3+ визита)
3. **Фиксированная скидка** - 200₽ при покупке от 1500₽
4. **VIP скидка** - 15% для VIP клиентов от 3000₽
5. **Скидка на день рождения** - 20% в месяц дня рождения от 1000₽

### История покупок
- Для каждого клиента создаётся от 0 до 15 случайных покупок
- Покупки распределены за последние 6 месяцев
- Суммы покупок от 300₽ до 5000₽
- Автоматически применяются доступные скидки
- Автоматически начисляются бонусы (1% от суммы)

### Бонусы
- Автоматическое начисление бонусов за покупки
- Случайное списание бонусов (30% вероятность)

### Сегментация
Автоматическая сегментация всех клиентов:
- **new** - новые клиенты (0 покупок)
- **one_time** - одноразовые покупки (1 покупка)
- **regular** - постоянные клиенты (5+ покупок)
- **vip** - VIP клиенты (10+ покупок, 10000+₽)
- **occasional** - случайные клиенты (2-4 покупки)

## Запуск

### С очисткой существующих данных
```bash
cd backend
python -m scripts.init_db --clear
```

или

```bash
cd backend
python scripts/init_db.py --clear
```

### Без очистки (добавление к существующим)
```bash
cd backend
python -m scripts.init_db
```

## Результат

После выполнения скрипта вы увидите статистику:
- Количество созданных магазинов
- Количество созданных клиентов
- Количество покупок
- Количество правил скидок
- Общая выручка

## Использование данных

После создания мок-данных вы можете:

1. **Тестировать кассу (POS)**
   - Откройте http://localhost:3000/pos
   - Введите телефон существующего клиента (например, +79991234567)
   - Обработайте покупку

2. **Просматривать аналитику**
   - Откройте http://localhost:3000/analytics
   - Увидите статистику по всем покупкам

3. **Проверять клиентов**
   - Откройте http://localhost:3000/customers
   - Увидите всех созданных клиентов с их историей покупок

4. **Тестировать API**
   - Откройте http://localhost:8000/docs
   - Используйте существующие ID клиентов для тестирования

## Примечания

- Данные генерируются случайным образом, поэтому при каждом запуске результаты могут отличаться
- Для повторяемости можно зафиксировать random.seed() в скрипте
- Все покупки автоматически обрабатываются через систему скидок и бонусов

